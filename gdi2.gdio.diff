diff --git a/gitrc/checkout_rejs.sh b/gitrc/checkout_rejs.sh
index d81f6f38..ddbfb613 100755
--- ./gitrc/checkout_rejs.sh
+++ ./gitrc/checkout_rejs.sh
@@ -2,6 +3,7 @@
 for ss in $(git status | grep \.rej$) ; \
 do \
     targetFile=$(echo "$ss" | sed 's/\.rej$//g')
-    git checkout "$1" "$targetFile" && \
-        rm "$ss"
+    git show "$1":"$targetFile" > "$ss"
 done
+
+git show "$1":COMMIT_EDITMSG > COMMIT_EDITMSG
diff --git a/gitrc/g.sh b/gitrc/g.sh
index 8de34e76..3c402327 100755
--- ./gitrc/g.sh
+++ ./gitrc/g.sh
@@ -1,7 +1,19 @@
 #!/bin/zsh
 ~/loadrc/gitrc/include_gitconfig.sh
+
+commit_message="n"
+
+if [ -f COMMIT_EDITMSG ]
+then
+    commit_message=$(cat COMMIT_EDITMSG)
+fi
+
+if [ -n "$1" ]
+then
+    commit_message="$1"
+fi
+
 git commit --no-edit || \
-    git commit -m "$1" || \
-    git commit -m n
+    git commit -m "$commit_message"
 
 ~/loadrc/gitrc/postCommit.sh
diff --git a/gitrc/gdi2.sh b/gitrc/gdi2.sh
index dbcf937b..a905beda 100755
--- ./gitrc/gdi2.sh
+++ ./gitrc/gdi2.sh
@@ -26,12 +26,26 @@ host=$(git config deploy.host)
 rpath=$(git config deploy.path)
 
 GDITDIFF=$(echo "$currentBranch.gdit.diff" | sed 's/\//_/g')
+
+if [ -z $(cat $GDITDIFF) ]
+then
+    . ~/loadrc/imvurc/ghypo.sh "$targetBranch"
+    ~/loadrc/gitrc/gfix.sh
+    exit 0
+fi
+
 ~/loadrc/gitrc/discard_unnecessaries.sh ; \
     git checkout -f "$targetBranch" ; \
-    git apply --index --reject --whitespace=fix "$GDITDIFF" ; \
-    ~/loadrc/gitrc/checkout_rejs.sh "$currentBranch" && \
-    git commit  --no-verify -am "$commit_message" ; \
+    git apply --index --reject --whitespace=fix "$GDITDIFF"
+
+retVal=$?
+if [ $retVal -ne 0 ]
+then
+    ~/loadrc/gitrc/checkout_rejs.sh "$currentBranch"
+else
+    git commit  --no-verify -am "$commit_message" && \
         git pull ; \
         git push ; \
         . ~/loadrc/imvurc/ghypo.sh "$targetBranch" ; \
         ~/loadrc/gitrc/gfix.sh
+fi
